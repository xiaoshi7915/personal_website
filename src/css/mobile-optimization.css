/**
 * 移动端优化样式
 * 提升移动设备上的用户体验
 */

/* 触摸目标大小优化 - 确保按钮和链接足够大，易于点击 */
@media (max-width: 996px) {
  /* 导航栏按钮 */
  .navbar__item {
    min-height: 44px; /* iOS推荐的最小触摸目标 */
    min-width: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* 链接和按钮 */
  a, button {
    min-height: 44px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  /* 代码复制按钮 */
  .copyButton {
    min-width: 44px;
    min-height: 44px;
    padding: 0.5rem;
  }

  /* 侧边栏菜单项 */
  .menu__link {
    min-height: 44px;
    padding: 0.75rem 1rem;
  }

  /* 卡片点击区域 */
  .card {
    min-height: 44px;
  }

  /* 表格在小屏幕上优化 */
  table {
    display: block;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  /* 代码块横向滚动优化 */
  pre {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    -ms-overflow-style: -ms-autohiding-scrollbar;
  }

  /* 图片响应式 */
  img {
    max-width: 100%;
    height: auto;
  }

  /* 避免文本选择时的缩放（iOS Safari） */
  input, textarea, select {
    font-size: 16px; /* 防止iOS自动缩放 */
  }

  /* 优化长文本换行 */
  p, li, td {
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
  }

  /* 优化标题大小 */
  h1 {
    font-size: 1.75rem;
    line-height: 1.3;
  }

  h2 {
    font-size: 1.5rem;
    line-height: 1.3;
  }

  h3 {
    font-size: 1.25rem;
    line-height: 1.3;
  }

  /* 优化间距 */
  .container {
    padding-left: 1rem;
    padding-right: 1rem;
  }

  /* 优化搜索框 */
  .navbar__search-input {
    font-size: 16px; /* 防止iOS自动缩放 */
    min-height: 44px;
  }

  /* 优化模态框 */
  .modal {
    max-width: 95vw;
    margin: 1rem auto;
  }

  /* 优化工具按钮位置 */
  .global-doc-tools {
    bottom: 80px; /* 为移动端底部导航留出空间 */
  }

  /* 优化返回顶部按钮 */
  .back-to-top {
    bottom: 20px;
    right: 20px;
    width: 48px;
    height: 48px;
  }

  /* 优化分享和PDF导出按钮 */
  .share-btn,
  .pdf-export-btn {
    width: 48px;
    height: 48px;
    font-size: 1.25rem;
  }

  /* 优化阅读进度条 */
  .reading-progress {
    height: 3px; /* 移动端稍微细一点 */
  }

  /* 优化评论区域 */
  .giscus {
    margin-top: 2rem;
  }

  /* 优化文档反馈表单 */
  .doc-feedback {
    padding: 1rem;
  }

  /* 优化表格在小屏幕上的显示 */
  .table-wrapper {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    margin: 1rem -1rem;
    padding: 0 1rem;
  }

  /* 优化代码示例 */
  .code-example {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  /* 优化卡片网格 */
  .feature-grid {
    grid-template-columns: 1fr;
    gap: 1rem;
  }

  /* 优化按钮组 */
  .button-group {
    flex-direction: column;
    width: 100%;
  }

  .button-group .button {
    width: 100%;
    margin-bottom: 0.5rem;
  }

  /* 优化导航栏 */
  .navbar {
    padding: 0.5rem 1rem;
  }

  .navbar__brand {
    font-size: 1.1rem;
  }

  /* 优化页脚 */
  .footer {
    padding: 2rem 1rem;
  }

  .footer__links {
    flex-direction: column;
  }

  /* 优化侧边栏 */
  .sidebar {
    padding: 1rem;
  }

  /* 优化主内容区域 */
  main {
    padding: 1rem 0;
  }

  /* 优化文章内容 */
  article {
    padding: 1rem;
  }

  /* 优化列表 */
  ul, ol {
    padding-left: 1.5rem;
  }

  /* 优化引用块 */
  blockquote {
    margin: 1rem 0;
    padding: 1rem;
    font-size: 0.9rem;
  }

  /* 优化警告框 */
  .admonition {
    margin: 1rem 0;
    padding: 1rem;
  }

  /* 优化标签 */
  .badge {
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
  }
}

/* 超小屏幕优化（手机竖屏） */
@media (max-width: 480px) {
  h1 {
    font-size: 1.5rem;
  }

  h2 {
    font-size: 1.25rem;
  }

  h3 {
    font-size: 1.1rem;
  }

  .container {
    padding-left: 0.75rem;
    padding-right: 0.75rem;
  }

  .navbar__brand {
    font-size: 1rem;
  }

  /* 进一步优化按钮大小 */
  .button {
    padding: 0.625rem 1rem;
    font-size: 0.875rem;
  }
}

/* 横屏优化 */
@media (max-width: 996px) and (orientation: landscape) {
  .navbar {
    height: auto;
    min-height: 56px;
  }

  .hero {
    padding: 2rem 0;
  }
}

/* 触摸设备优化 */
@media (hover: none) and (pointer: coarse) {
  /* 增加可点击元素的视觉反馈 */
  a, button {
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
  }

  /* 优化滚动性能 */
  * {
    -webkit-overflow-scrolling: touch;
  }

  /* 禁用双击缩放 */
  * {
    touch-action: manipulation;
  }
}

/* 高DPI屏幕优化 */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  /* 确保图标和图片在高DPI屏幕上清晰显示 */
  img, svg {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
}

